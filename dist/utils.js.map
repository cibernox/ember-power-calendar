{"version":3,"file":"utils.js","sources":["../src/utils.ts"],"sourcesContent":["import type { TaskInstance } from 'ember-concurrency';\nimport type {\n  TCalendarType,\n  TPowerCalendarMoveCenterUnit,\n} from './components/power-calendar';\nimport type { PowerCalendarRangeDay } from './components/power-calendar-range';\n\nexport type TWeekdayFormat = 'min' | 'short' | 'long';\n\nexport interface DateLibrary {\n  add: (date: Date, quantity: number, unit: string) => Date;\n  formatDate: (date: Date, format: string, locale: string | null) => string;\n  startOf: (date: Date, unit: string) => Date;\n  endOf: (date: Date, unit: string) => Date;\n  weekday: (date: Date) => number;\n  isoWeekday: (date: Date) => number;\n  getWeekdaysShort: () => string[];\n  getWeekdaysMin: () => string[];\n  getWeekdays: () => string[];\n  isAfter: (date1: Date, date2: Date) => boolean;\n  isBefore: (date1: Date, date2: Date) => boolean;\n  isSame: (date1: Date, date2: Date, unit: string) => boolean;\n  isBetween: (\n    date: Date,\n    start: Date,\n    end: Date,\n    unit?: string,\n    inclusivity?: string,\n  ) => boolean;\n  diff: (date1: Date, date2: Date) => number;\n  normalizeDate: (date?: unknown) => Date | undefined; // date could be null, number. Date, Moment, undefined...\n  normalizeRangeActionValue: (\n    val: RangeActionValue,\n  ) => NormalizeRangeActionValue;\n  normalizeMultipleActionValue: (val: {\n    date: Date[];\n  }) => NormalizeMultipleActionValue;\n  normalizeCalendarDay: (day: PowerCalendarDay) => PowerCalendarDay;\n  withLocale: (locale: string, fn: () => unknown) => unknown;\n  normalizeCalendarValue: (value: { date: Date }) => NormalizeCalendarValue;\n  normalizeDuration: (value: unknown) => number | null | undefined;\n  getDefaultLocale: () => string;\n  localeStartOfWeek: (locale: string) => number;\n  startOfWeek: (day: Date, startOfWeek: number) => Date;\n  endOfWeek: (day: Date, startOfWeek: number) => Date;\n}\n\nexport interface NormalizeRangeActionValue {\n  date: {\n    start?: Date | null;\n    end?: Date | null;\n  };\n  moment?: {\n    start?: unknown;\n    end?: unknown;\n  };\n  datetime?: {\n    start?: unknown;\n    end?: unknown;\n  };\n}\n\nexport interface NormalizeMultipleActionValue {\n  date: Date[];\n  moment?: unknown[];\n  datetime?: unknown[];\n}\n\nexport interface NormalizeCalendarValue {\n  date: Date | undefined;\n  moment?: unknown;\n  datetime?: unknown;\n}\n\nexport interface RangeActionValue {\n  date: SelectedPowerCalendarRange;\n}\n\nexport interface SelectedPowerCalendarRange {\n  start?: Date | null;\n  end?: Date | null;\n}\n\nexport interface PowerCalendarDay {\n  id: string; // A unique identified of the day. It has the format YYYY-MM-DD\n  number: number; // The day's number. From 1 to 31\n  date: Date; //\tThe native Date object representing that day.\n  moment?: unknown; //\tThe moment representing that day. (only when ember-power-calendar-moment is installed)\n  datetime?: unknown; //\tThe luxon representing that day. (only when ember-power-calendar-luxon is installed)\n  isFocused: boolean; //\tIt is true when the the cell of that day has the focus\n  isCurrentMonth: boolean; //\tIt is true for those days in the current day, and false for those days for the previous/next months shown around.\n  isToday: boolean; //\tIt is true if this day is today\n  isSelected: boolean; //\tIt is true if the date of this day is the selected one. In multiple select it is true if the date of this day is among the selected ones. In range selects, it is true if the date if this day is in the range, including both ends.\n  isRangeStart?: boolean; //\tIt is true if this day is the beginning of a range. It is false in non-range calendars\n  isRangeEnd?: boolean; //\tIt is true if this day is the end of a range. It is false in non-range calendars\n  isDisabled: boolean; //\tIt is true if days are not in range for range calendars or are included in disabled dates.\n}\n\nexport interface BaseCalendarAPI<T extends BaseCalendarAPI<T>> {\n  type: TCalendarType;\n  uniqueId: string;\n  calendarUniqueId?: string;\n  loading: boolean;\n  center: Date;\n  locale: string;\n  actions: BasePowerCalendarActions<T>;\n}\n\nexport type DayType<CalendarType extends TCalendarType> =\n  CalendarType extends 'range' ? PowerCalendarRangeDay : PowerCalendarDay;\n\nexport interface BasePowerCalendarActions<T extends BaseCalendarAPI<T>> {\n  changeCenter?: (\n    newCenter: Date,\n    calendar: T,\n    event: MouseEvent,\n  ) => TaskInstance<void>;\n  moveCenter?: (\n    step: number,\n    unit: TPowerCalendarMoveCenterUnit,\n    calendar: T,\n    event: MouseEvent | KeyboardEvent,\n  ) => Promise<void>;\n  select?: (day: DayType<T['type']>, calendar: T, e: MouseEvent) => void;\n}\n\nlet dateLib: DateLibrary;\n\nexport function registerDateLibrary(dateLibrary: DateLibrary) {\n  dateLib = dateLibrary;\n}\n\nfunction getDateLibrary() {\n  if (!dateLib) {\n    throw new Error(\n      `You have installed \"ember-power-calendar\" but you don't have registered any of the required meta-addons to make it work, like 'ember-power-calendar-moment' or 'ember-power-calendar-luxon'. Please add to your app and register the meta package in app.js.`,\n    );\n  }\n\n  return dateLib;\n}\n\nexport function add(date: Date, quantity: number, unit: string): Date {\n  return getDateLibrary().add(date, quantity, unit);\n}\n\nexport function formatDate(\n  date: Date,\n  format: string,\n  locale: string | null = null,\n): string {\n  return getDateLibrary().formatDate(date, format, locale);\n}\n\nexport function startOf(date: Date, unit: string): Date {\n  return getDateLibrary().startOf(date, unit);\n}\n\nexport function endOf(date: Date, unit: string): Date {\n  return getDateLibrary().endOf(date, unit);\n}\n\nexport function weekday(date: Date): number {\n  return getDateLibrary().weekday(date);\n}\n\nexport function isoWeekday(date: Date): number {\n  return getDateLibrary().isoWeekday(date);\n}\n\nexport function getWeekdaysShort(): string[] {\n  return getDateLibrary().getWeekdaysShort();\n}\n\nexport function getWeekdaysMin(): string[] {\n  return getDateLibrary().getWeekdaysMin();\n}\n\nexport function getWeekdays(): string[] {\n  return getDateLibrary().getWeekdays();\n}\n\nexport function isAfter(date1: Date, date2: Date): boolean {\n  return getDateLibrary().isAfter(date1, date2);\n}\n\nexport function isBefore(date1: Date, date2: Date): boolean {\n  return getDateLibrary().isBefore(date1, date2);\n}\n\nexport function isSame(date1: Date, date2: Date, unit: string): boolean {\n  return getDateLibrary().isSame(date1, date2, unit);\n}\n\nexport function isBetween(\n  date: Date,\n  start: Date,\n  end: Date,\n  unit: string,\n  inclusivity: string,\n): boolean {\n  return getDateLibrary().isBetween(date, start, end, unit, inclusivity);\n}\n\nexport function diff(date1: Date, date2: Date): number {\n  return getDateLibrary().diff(date1, date2);\n}\n\nexport function normalizeDate(date?: unknown): Date | undefined {\n  return getDateLibrary().normalizeDate(date);\n}\n\nexport function normalizeRangeActionValue(\n  val: RangeActionValue,\n): NormalizeRangeActionValue {\n  return getDateLibrary().normalizeRangeActionValue(val);\n}\n\nexport function normalizeMultipleActionValue(val: {\n  date: Date[];\n}): NormalizeMultipleActionValue {\n  return getDateLibrary().normalizeMultipleActionValue(val);\n}\n\nexport function normalizeCalendarDay(day: PowerCalendarDay): PowerCalendarDay {\n  return getDateLibrary().normalizeCalendarDay(day);\n}\n\nexport function withLocale(locale: string, fn: () => unknown): unknown {\n  return getDateLibrary().withLocale(locale, fn);\n}\n\nexport function normalizeCalendarValue(value: {\n  date: Date;\n}): NormalizeCalendarValue {\n  return getDateLibrary().normalizeCalendarValue(value);\n}\n\nexport function normalizeDuration(value: unknown): number | null | undefined {\n  return getDateLibrary().normalizeDuration(value);\n}\n\nexport function getDefaultLocale(): string {\n  return getDateLibrary().getDefaultLocale();\n}\n\nexport function localeStartOfWeek(locale: string): number {\n  return getDateLibrary().localeStartOfWeek(locale);\n}\n\nexport function startOfWeek(day: Date, startOfWeek: number): Date {\n  return getDateLibrary().startOfWeek(day, startOfWeek);\n}\n\nexport function endOfWeek(day: Date, startOfWeek: number): Date {\n  return getDateLibrary().endOfWeek(day, startOfWeek);\n}\n"],"names":["dateLib","registerDateLibrary","dateLibrary","getDateLibrary","Error","add","date","quantity","unit","formatDate","format","locale","startOf","endOf","weekday","isoWeekday","getWeekdaysShort","getWeekdaysMin","getWeekdays","isAfter","date1","date2","isBefore","isSame","isBetween","start","end","inclusivity","diff","normalizeDate","normalizeRangeActionValue","val","normalizeMultipleActionValue","normalizeCalendarDay","day","withLocale","fn","normalizeCalendarValue","value","normalizeDuration","getDefaultLocale","localeStartOfWeek","startOfWeek","endOfWeek"],"mappings":"AA8HA,IAAIA,OAAoB;AAEjB,SAASC,mBAAmBA,CAACC,WAAwB,EAAE;AAC5DF,EAAAA,OAAO,GAAGE,WAAW;AACvB;AAEA,SAASC,cAAcA,GAAG;EACxB,IAAI,CAACH,OAAO,EAAE;AACZ,IAAA,MAAM,IAAII,KAAK,CACb,CAAA,4PAAA,CACF,CAAC;AACH,EAAA;AAEA,EAAA,OAAOJ,OAAO;AAChB;AAEO,SAASK,GAAGA,CAACC,IAAU,EAAEC,QAAgB,EAAEC,IAAY,EAAQ;EACpE,OAAOL,cAAc,EAAE,CAACE,GAAG,CAACC,IAAI,EAAEC,QAAQ,EAAEC,IAAI,CAAC;AACnD;AAEO,SAASC,UAAUA,CACxBH,IAAU,EACVI,MAAc,EACdC,MAAqB,GAAG,IAAI,EACpB;EACR,OAAOR,cAAc,EAAE,CAACM,UAAU,CAACH,IAAI,EAAEI,MAAM,EAAEC,MAAM,CAAC;AAC1D;AAEO,SAASC,OAAOA,CAACN,IAAU,EAAEE,IAAY,EAAQ;EACtD,OAAOL,cAAc,EAAE,CAACS,OAAO,CAACN,IAAI,EAAEE,IAAI,CAAC;AAC7C;AAEO,SAASK,KAAKA,CAACP,IAAU,EAAEE,IAAY,EAAQ;EACpD,OAAOL,cAAc,EAAE,CAACU,KAAK,CAACP,IAAI,EAAEE,IAAI,CAAC;AAC3C;AAEO,SAASM,OAAOA,CAACR,IAAU,EAAU;AAC1C,EAAA,OAAOH,cAAc,EAAE,CAACW,OAAO,CAACR,IAAI,CAAC;AACvC;AAEO,SAASS,UAAUA,CAACT,IAAU,EAAU;AAC7C,EAAA,OAAOH,cAAc,EAAE,CAACY,UAAU,CAACT,IAAI,CAAC;AAC1C;AAEO,SAASU,gBAAgBA,GAAa;AAC3C,EAAA,OAAOb,cAAc,EAAE,CAACa,gBAAgB,EAAE;AAC5C;AAEO,SAASC,cAAcA,GAAa;AACzC,EAAA,OAAOd,cAAc,EAAE,CAACc,cAAc,EAAE;AAC1C;AAEO,SAASC,WAAWA,GAAa;AACtC,EAAA,OAAOf,cAAc,EAAE,CAACe,WAAW,EAAE;AACvC;AAEO,SAASC,OAAOA,CAACC,KAAW,EAAEC,KAAW,EAAW;EACzD,OAAOlB,cAAc,EAAE,CAACgB,OAAO,CAACC,KAAK,EAAEC,KAAK,CAAC;AAC/C;AAEO,SAASC,QAAQA,CAACF,KAAW,EAAEC,KAAW,EAAW;EAC1D,OAAOlB,cAAc,EAAE,CAACmB,QAAQ,CAACF,KAAK,EAAEC,KAAK,CAAC;AAChD;AAEO,SAASE,MAAMA,CAACH,KAAW,EAAEC,KAAW,EAAEb,IAAY,EAAW;EACtE,OAAOL,cAAc,EAAE,CAACoB,MAAM,CAACH,KAAK,EAAEC,KAAK,EAAEb,IAAI,CAAC;AACpD;AAEO,SAASgB,SAASA,CACvBlB,IAAU,EACVmB,KAAW,EACXC,GAAS,EACTlB,IAAY,EACZmB,WAAmB,EACV;AACT,EAAA,OAAOxB,cAAc,EAAE,CAACqB,SAAS,CAAClB,IAAI,EAAEmB,KAAK,EAAEC,GAAG,EAAElB,IAAI,EAAEmB,WAAW,CAAC;AACxE;AAEO,SAASC,IAAIA,CAACR,KAAW,EAAEC,KAAW,EAAU;EACrD,OAAOlB,cAAc,EAAE,CAACyB,IAAI,CAACR,KAAK,EAAEC,KAAK,CAAC;AAC5C;AAEO,SAASQ,aAAaA,CAACvB,IAAc,EAAoB;AAC9D,EAAA,OAAOH,cAAc,EAAE,CAAC0B,aAAa,CAACvB,IAAI,CAAC;AAC7C;AAEO,SAASwB,yBAAyBA,CACvCC,GAAqB,EACM;AAC3B,EAAA,OAAO5B,cAAc,EAAE,CAAC2B,yBAAyB,CAACC,GAAG,CAAC;AACxD;AAEO,SAASC,4BAA4BA,CAACD,GAE5C,EAAgC;AAC/B,EAAA,OAAO5B,cAAc,EAAE,CAAC6B,4BAA4B,CAACD,GAAG,CAAC;AAC3D;AAEO,SAASE,oBAAoBA,CAACC,GAAqB,EAAoB;AAC5E,EAAA,OAAO/B,cAAc,EAAE,CAAC8B,oBAAoB,CAACC,GAAG,CAAC;AACnD;AAEO,SAASC,UAAUA,CAACxB,MAAc,EAAEyB,EAAiB,EAAW;EACrE,OAAOjC,cAAc,EAAE,CAACgC,UAAU,CAACxB,MAAM,EAAEyB,EAAE,CAAC;AAChD;AAEO,SAASC,sBAAsBA,CAACC,KAEtC,EAA0B;AACzB,EAAA,OAAOnC,cAAc,EAAE,CAACkC,sBAAsB,CAACC,KAAK,CAAC;AACvD;AAEO,SAASC,iBAAiBA,CAACD,KAAc,EAA6B;AAC3E,EAAA,OAAOnC,cAAc,EAAE,CAACoC,iBAAiB,CAACD,KAAK,CAAC;AAClD;AAEO,SAASE,gBAAgBA,GAAW;AACzC,EAAA,OAAOrC,cAAc,EAAE,CAACqC,gBAAgB,EAAE;AAC5C;AAEO,SAASC,iBAAiBA,CAAC9B,MAAc,EAAU;AACxD,EAAA,OAAOR,cAAc,EAAE,CAACsC,iBAAiB,CAAC9B,MAAM,CAAC;AACnD;AAEO,SAAS+B,WAAWA,CAACR,GAAS,EAAEQ,WAAmB,EAAQ;EAChE,OAAOvC,cAAc,EAAE,CAACuC,WAAW,CAACR,GAAG,EAAEQ,WAAW,CAAC;AACvD;AAEO,SAASC,SAASA,CAACT,GAAS,EAAEQ,WAAmB,EAAQ;EAC9D,OAAOvC,cAAc,EAAE,CAACwC,SAAS,CAACT,GAAG,EAAEQ,WAAW,CAAC;AACrD;;;;"}